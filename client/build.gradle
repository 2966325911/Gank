apply from: "${rootProject.rootDir}/common_config.gradle"
apply plugin: 'com.android.application'

android {
    signingConfigs {
        cang_wang {
            keyAlias 'cang_wang'
            keyPassword 'ling123456'
            storeFile file('../cang_wang.jks')
            storePassword 'ling123456'
        }
    }
    project.ext.setDefaultConfig project
    defaultConfig {
        if (!project.ext.isLib) {
            applicationId project.ext.applicationId
        }

        versionCode 1
        versionName "1.0"

        javaCompileOptions {
            annotationProcessorOptions {
                arguments = [moduleName: project.getName()]
            }
        }
    }
    buildTypes {
        debug {
            minifyEnabled true
            shrinkResources true
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro','../proguard-common-rules.pro'
        }
        release {
            minifyEnabled true
            shrinkResources true
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro','../proguard-common-rules.pro'
            signingConfig signingConfigs.cang_wang
//            proguardFile '/Users/air/Desktop/Android/MyJob/Gank/client/proguard-rules.pro'
        }
    }
    productFlavors {
        client {
            manifestPlaceholders = [
                    channel : "10086",  //渠道号
                    verNum  : "1",       //版本号
                    app_name: "Gank",   //app名
                    setting_info: "material.com.settings.SettingInfo" //设置数据文件
            ]
        }
        server {
            if (!project.ext.isLib) {
                applicationId project.ext.applicationId + '.server' //appId
            }
            manifestPlaceholders = [
                    channel : "10087",   //渠道号
                    verNum  : "1",        //版本号
                    app_name: "Gank服务版",   //app名
                    setting_info: "material.com.server_settings.ServerSettingInfo"  //设置数据文件
            ]
        }
    }
}

dependencies {
    compile fileTree(include: ['*.jar'], dir: 'libs')
    if (!project.ext.isNewsDebug) {
        compile project(':news')
    }
    compile project(':web')
        if (!project.ext.isSettingDebug) {
            clientCompile project(':settings')
            clientCompile project(':submit')
            serverCompile project(':server_settings')
        }
    compile project(':advice')
    annotationProcessor 'com.alibaba:arouter-compiler:1.1.1'
}
